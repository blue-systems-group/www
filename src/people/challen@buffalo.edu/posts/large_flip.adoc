---
working: true
spelling_exceptions:
  - Auth0
  - Legos
  - HotCRP
---

== How to Flip a Large Class

[.snippet.lead]
//
--
//
This semester I've been rolling out a link:/courses/ub-199-fall-2016/[new
course on the internet] in a
https://en.wikipedia.org/wiki/Flipped_classroom[flipped classroom] format.
//
Despite nominally being a seminar, the course enrolls 440 students and meets
for activities in two large groups, one with 99 students and another with
341.
//
The course has been a lot of fun, and I've learned a lot along the way.
//
We've had to overcome many challenges--some of which I anticipated, and some
of which caught me by surprise footnote:[Although you could argue--and I would
agree--that all of them should have been easy to anticipate.].

Note that this post focuses on the infrastructure and management challenges
of flipping a large course.
//
We're also doing something quite interesting with the video delivery, but
I'll return to that in a later post.
//
--

=== What Is A/Our Flipped Classroom?

To begin, just brief review for the uninitiated.
//
In a flipped classroom you flip the lecturing out of class and flip the
homework or course activities in to class.
//
The goal, as far as I see it, is to align the things that benefit from
supervision (homework) with the hours that you can supervise students (class
meetings).
//
As a technologist, I also consider this approach a better match with what we
can do with technology (monitoring online video viewing) and the things that
we can't do with technology (provide interactive help with homework).
//
I have also recorded a https://www.youtube.com/watch?v=_i_BgT26iYM[short
explanation of the flipped classroom model] using Legos borrowed from my
friend Marlon.

In _our_ flipped classroom, each week students watch around 20 5-minute
videos covering various topics related to how the internet works.
//
https://www.youtube.com/playlist?list=PLk97mPCd8nvbxGGfkYkBXrSEvpTc1xTF8[Here's
the entire list], currently at 250 videos over 13 weeks.
//
On Monday and Wednesday students attend a 50-minute meeting where they
complete an activity in pairs or groups of four.
//
We refer to these as _activity sections_ to distinguish them from lectures.
//
Course recitations are taught on Thursdays and Fridays and are taught by
faculty--as required by the
https://www.buffalo.edu/ubcurriculum/seminar.html[UB Seminar Program].
//
Grading is primarily based on participation.
//
Students receive credit for watching the short videos before the deadline and
attending and participating in the activity sections.
//
They are also required to record three new video explanations for course
concepts which are graded by the course staff.

Why this class is called a seminar is a somewhat long story.
//
Here's the short version.
//
UB decided that all freshman should have a seminar taught by a faculty member
to groups of 28 students.
//
[.pullquote]#Unfortunately, the only departments with enough faculty to teach
these new required seminars are ones with too many faculty and too few
students.#
//
In computer science, we have too many students and too few faculty.

Initially we had two options.
//
One was to find faculty volunteers to teach 16 small seminars.
//
I tried that.
//
It didn't work.
//
The second option was let our students take a seminar on subjects like "The
Writing of Food Politics" footnote:[Which sounds interesting, or at least "I
can't figure out what it is about by the title" interesting.].
//
Not that I have any problem with computer scientists having a broad-based
liberal arts education, but that seemed like a missed opportunity.

Luckily for us, several other departments convinced the seminar program to
grandfather in their existing larger courses.
//
After some negotiations, we received permission to hold 100-student lectures
as long as they were accompanied by a seminar-size recitation.
//
And that created an opportunity to rethink the seminar experience as a huge
flipped classroom.

=== Step 1: Get a Room

link:/people/gjbunyea[Greg] and I spent the months and weeks before the class
launched anticipating and addressing lots of potential problems.
//
Some of them are described in more detail below.
//
But it wasn't until a few days before classes started that we discovered one
of the biggest challenges to teaching a huge flipped class.
//
*All of the classrooms that we had been assigned were completely unsuited to
group activities.*

The course was originally planned as three 100-student sections taught at the
same time in neighboring classrooms.
//
But when we visited those classrooms, we found seats bolted to tables,
stadium seating, and narrow aisles.
//
[.pullquote]#Most current university classrooms are purpose-built for
lecturing.#
//
I guess that's why they call them lecture halls...

++++
<div class="row" style="margin-top:10px; margin-bottom:10px;">
  <div class="col-xs-offset-1 col-xs-10" style="border:1px solid grey; padding-top:10px;">
    <div class="row">
      <div class="col-xs-4">
        <a href="/assets/img/posts/large_flip/lecture1.jpg" data-toggle="lightbox"
           data-gallery="lecture-rooms"
           data-footer="This is what they gave you...">
          <img src="/assets/img/posts/large_flip/lecture1.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-4">
        <a href="/assets/img/posts/large_flip/lecture2.jpg" data-toggle="lightbox"
           data-gallery="lecture-rooms"
           data-footer="This is what they gave you...">
          <img src="/assets/img/posts/large_flip/lecture2.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-4">
        <a href="/assets/img/posts/large_flip/lecture3.jpg" data-toggle="lightbox"
           data-gallery="lecture-rooms"
           data-footer="This is what they gave you...">
          <img src="/assets/img/posts/large_flip/lecture3.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-12">
        <h4>Here's what they gave you...</h4>
      </div>
    </div>
  </div>
</div>
++++

Could we have used these classrooms?
//
Sure.
//
We could have limited the activity group size to two so that students could
work side-by-side, the only configuration the rooms allowed.
//
Our teaching assistants could have developed huge calves from hiking up and
down the steep stairways and thin waists from squeezing through narrow aisles
to reach groups that needed help.
//
But that sounded terrible.
//
So we went to look for other solutions.

And then--a miracle.
//
We found Bert's.
//
Bert's is an on-campus cafeteria.
//
I've noticed it for years, mainly because it has that lovely cafeteria smell
that makes it impossible to miss as you walk by.
//
Bert's seats 500 students in two equal-sized rooms, mostly at tables of four.
//
And at our seminar meeting times--9AM and 4PM--it is largely empty.
//
Technically, half of the cafeteria is closed at 4PM, which was good because
we had 340 students we wanted to bring down at that time.

++++
<div class="row" style="margin-top:10px; margin-bottom:10px;">
  <div class="col-xs-offset-1 col-xs-10" style="border:1px solid grey; padding-top:10px;">
    <div class="row">
      <div class="col-xs-6">
        <a href="/assets/img/posts/large_flip/berts1.jpg" data-toggle="lightbox"
           data-gallery="berts-rooms"
           data-footer="...but this is what you need.">
          <img src="/assets/img/posts/large_flip/berts1.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-6">
        <a href="/assets/img/posts/large_flip/berts2.jpg" data-toggle="lightbox"
           data-gallery="berts-rooms"
           data-footer="...but this is what you need.">
          <img src="/assets/img/posts/large_flip/berts2.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
    </div>
    <div class="row" style="margin-top:10px;">
      <div class="col-xs-6">
        <a href="/assets/img/posts/large_flip/berts3.jpg" data-toggle="lightbox"
           data-gallery="berts-rooms"
           data-footer="...but this is what you need.">
          <img src="/assets/img/posts/large_flip/berts3.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-6">
        <a href="/assets/img/posts/large_flip/berts4.jpg" data-toggle="lightbox"
           data-gallery="berts-rooms"
           data-footer="...but this is what you need.">
          <img src="/assets/img/posts/large_flip/berts4.jpg" alt="Lecture hall"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-12">
        <h4 class="spelling_exception">...but this is what you need.</h4>
      </div>
    </div>
  </div>
</div>
++++

Getting permission to use Bert's was so easy it almost made me pinch myself:

[quote]
____
Me: Can I bring 340 students down here at 4PM?

Bert's Manager: Sure.

Me: Really?

Bert's Manager: Sure.

Me: Do you really work at UB?

Bert's Manager: Sure.
____

A few days later the same extremely agreeable manager allowed us to use part
of Bert's at 9AM, when the cafeteria is open and serving breakfast.
//
We only have 99 students at that time, which doesn't interfere with
early-morning diners.
//
And that was that.

To guide students to where their group is located, we created an online
https://www.internet-class.org/img/berts.png[seating chart].
//
Students are assigned to new tables each week via email.
//
When they arrive in class, they use this to locate their table or group.
//
The first few times we tried this, chaos ensued for around 10 minutes.
//
But after a few iterations, students got the hang of it.
//
At this point, they find their groups quickly and get to work.
//
Our fantastic undergraduate teaching assistant circulate constantly among 12
or 16 students--3 or 4 groups--to keep them on task and answer any questions.

There's something incredibly exciting about having hundreds of like-minded
students packing the same space and working in close proximity.
//
But the way it came about was a fortunate accident, and it really opened my
eyes to something that should have been obvious to me but what not.
//
[.pullquote]#The lecture model is literally _physically embedded_ into
today's campuses.#
//
That makes running large activity-based or flipped classes extremely
challenging.
//
I've heard that some universities are tearing out lecture halls and trying to
reuse the space, but you can imagine how hard that would be.

Until campuses are physically redesigned to meet the needs of activity-based
classes, finding a suitable room will be a major challenge.
//
Next time I teach this class--which
link:/posts/2016-10-22-the-best-way-to-not-get-tenure[will not be at UB]--it
will be the first thing I'll do.

=== Step 2: Get Your Coding Hand Dirty

The physical plant isn't the only part of the university that is unprepared
for the challenge of flipping a large class.
//
The electronic tools are not anywhere close to being up to the task either.
//
So for your sake I hope that you have a coding hand--and that it is
http://idioms.thefreedictionary.com/get+hands+dirty[fairly dirty].
//
Because you're going to need it.

Consider making class announcements.
//
With 340 students working in two separate large cafeteria rooms, it becomes
impossible to use the beginning of class as an broadcast period.
//
There is no "front" of the room to deliver them from in the typical fashion.
//
And the act of mounting a table and shouting at the top of my lungs is
something that I'm not interested in doing, and that is frowned upon by
cafeteria staff.

For that reason, email becomes a much more important way of communicating
with students.
//
So let's say you want to send an email announcement to the entire class.
//
That would seem simple, right?
//
Wrong.

At UB, if I want to send an email to the entire class here is one of several
equally frustrating ways I'm supposed to do it.
//
First, I have to log in to a broken course management tool.
//
That log in has an obvious race condition and so it fails about 10% of the
time.
//
But it does produce on of my favorite error messages of all time:

++++
<div class="row" style="margin-top:10px; margin-bottom:10px;">
  <div class="col-xs-offset-1 col-xs-10" style="border:1px solid grey; padding-top:10px;">
    <div class="row">
      <div class="col-xs-12">
        <a href="/assets/img/posts/large_flip/error.png" data-toggle="lightbox"
           data-gallery="lecture-rooms"
           data-footer="This is what they gave you...">
          <img src="/assets/img/posts/large_flip/error.png" alt="HUB login error message"
               class="img-responsive">
        </a>
      </div>
      <div class="col-xs-12">
        <h4>"Sorry, we are currently unable to log you in... Despite this
        message, you are currently logged in(to)...". The mind reels.</h4>
      </div>
    </div>
  </div>
</div>
++++

Anyway--once you get past this, then you realize that the course management
system has needlessly broken your class into four chunks that need to be
emailed separately.
//
Then you have to remember that the system refers to email as "notifying"
students for no particular reason.
//
Once you've fought your way through a few more slow,
[.spelling_exception]#crashy#, and completely mobile-unfriendly screens, you
find yourself at a web form encouraging you to generate an email with the
subject "<From the desk of Geoffrey Challen>".
//
And then you remember that you have to repeat the process three more times.
//
[.pullquote]#Imagine trying to do this five minutes before your activity is
scheduled to start because you need to cancel class due to a outbreak of the
flu.#
//
No thanks.

But hey--I'm a computer scientist.
//
I'm familiar with cutting-edge software packages like
https://www.gnu.org/software/mailman/[Mailman], which allows me to create and
manage email lists.
//
All I need is a programmatic way to get an up-to-date list of all the email
addresses for the students in my class.
//
That should be easy, right?

Wrong again.
//
As far as I can tell, there is no API allowing faculty to retrieve updated
information for students in their class.
//
And so not only can you not generate email lists for sending mass email
messages, but good luck generating personalized emails or seating charts for
exams, creating accounts allowing students access to class websites or
forums, or completing any other task that _simply needs an up-to-date list of
the current students in the class_.

Luckily, I was familiar with these challenges from teaching other large
courses.
//
I spent a few manually downloading spreadsheets with student information and
using them to update various course resources.
//
But I finally broke down and did what any good computer scientist would do:
wasted several days of my life to completely automate the process.
//
You don't want to know the details and I don't want to share them with you,
but suffice to say that gory may not be a strong enough word.
//
That said, what pops out after several minutes of
http://casperjs.org/[`casperjs`]-enabled web interface banging is a JSON
document with student names, email addresses, other metadata--and even a
photo encoded in `base64`.
//
[.spelling_exception]#Boo-yah.#

But that tool is only one part of a complex set of tools that I've had to
develop this semester for doing flipped-classroom administration.
//
That toolchain now totals 28 JavaScript executables and around 2000
non-commenting lines of code.
//
It includes individual script that perform the following tasks:

. Update various Mailman mailing lists including ones that reach all
students, students by their official class assignment, staff, and recitation
instructors.
//
. Create accounts using https://auth0.com/[Auth0] for students allowing them
to use the https://www.internet-class.org[main video delivery website] and
the http://www.discourse.org/[Discourse]
https://discourse.internet-class.org[class forum].
//
. Randomly assign students to new groups of two or four, with some
demographic-based meddling. Also shuffle students into new pairs while
leaving them at the same table.
//
. Generate customized emails before each activity informing students of their
group assignment and providing the activity description.
//
. Parse and correct the attendance records--which contain a lot of
mistakes--and calculate that component of each student's grade.
//
. Access the video delivery database to record how many videos a student
watched before their deadlines and calculate that component of their grade.
//
. Integrate with the HotCRP system that we are using to review videos and
calculate that component of each student's grade.
//
. Combine all grading components to generate custom grade emails and export
the data into formats allowing me to set midterm grades.
//
. Assign undergraduate teaching assistants to table groups in ways that
respect the geometry of our flipped classroom.

=== Step 3: Get Activities

=== Step 4: Get Great People

// vim: ts=2:sw=2:et
